function Helper(){"use strict"}function ModelXhr(){"use strict";this.xhr=function(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}}function Site(){"use strict"}function AjaxConstructor(){"use strict"}function AjaxLoadCategory(e){"use strict";e&&(this.count=1,this.container=e,this.state=!0,this.commonProps(this,"general"))}function AjaxLoaderMultimedia(e,t){"use strict";e&&(this.element=e,this.count=t.getAttribute("data-count"),this.state=!0,this._Masonry_=null,this.commonProps(this,null))}function AjaxLoaderCategorySingle(e,t){"use strict";e&&(this.element=e,this.id=t.getAttribute("data-id")?t.getAttribute("data-id"):null,this.count=t.getAttribute("data-count"),this.state=!0,this.commonProps(this,null))}function Currency(){"use strict";var e="http://"+location.hostname+"/site/tryCurrency";this.Xhr("GET",e,null,this,this.templates)}function IframeGemerate(e){"use strict";if(!e)return!1;var t=e.getAttribute("data-src").split(","),a=this,r="";t.forEach(function(e){r+=a.template(e)}),e.insertAdjacentHTML("afterbegin",r)}function MansoryGenerator(e){e&&[].forEach.call(e,this.generateMansory)}function Market(e){if(e){this.element=e;for(var t=this.element.children,a=0;a<t.length;a++)"mouseenter mouseleave".split(" ").forEach(function(e){t[a].addEventListener(e,this.HandlerToMouseEnterLeave,!1)}.bind(this))}}function MenuButton(e,t){"use strict";return t||e?void e.addEventListener("click",this.slideMenu.bind(this,t,e)):!1}function Modal(){"use strict";var e=this;this.login=document.querySelector(".-login"),this.registration=document.querySelector(".-registration"),this.about=document.querySelector(".-about"),this.outerModal=document.querySelector(".val-modal-login-reg-outer"),this.rememberPassOrBack=document.querySelectorAll(".-val-remember-pass"),this.formSubmit=this.outerModal?this.outerModal.querySelectorAll("form"):null,this.StaticForm=null,this.login.addEventListener("click",e.openForm.bind(e,this.login)),this.registration.addEventListener("click",e.openForm.bind(e,this.registration)),this.about.addEventListener("click",e.openForm.bind(e,this.about));for(var t=0;t<this.rememberPassOrBack.length;t++)this.rememberPassOrBack[t].addEventListener("click",e.openRememberPassOrBack.bind(e));for(var a=0;a<this.formSubmit.length;a++)this.formSubmit[a].addEventListener("submit",e.sendForm.bind(e,this.formSubmit[a].id))}function Slider(e){"use strict";e&&(this.list=e,this.countChild=e.children.length,this.width=e.parentNode.clientWidth,this.currentSlide=0,e.style.width=this.width*this.countChild+"px",this.createControls(this.countChild))}function StickyAccordeon(e){"use strict";if(e){var t=this;t.accordeon=e.querySelector(".val-accordeons-block"),window.addEventListener("scroll",t.positionOfAccordeon.bind(t))}}function weatherForVal(){"use strict";var e="https://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20woeid%3D918233%20and%20u%3D%22c%22&format=json&l=ru";this.Xhr("GET",e,null,this,this.queryForecast)}Helper.prototype.returnDateNow=function(e){"use strict";var t=e?new Date(e):new Date,a=new Date(t.getDate(),t.getMonth(),t.getFullYear()).valueOf();return a},Helper.prototype.dateHalper=function(e,t){"use strict";var a=e.split(" "),r=new Date(a[0]);if(this.returnDateNow()>this.returnDateNow(a[0])){var n=this.mounthObject(r.getMonth()+1,t),s=r.getDate(),o=r.getFullYear();return s+" "+n+" "+o}return a[1].slice(0,-3)},Helper.prototype.mounthObject=function(e,t){"use strict";var a={ru:{1:"Января",2:"Февраля",3:"Марта",4:"Апреля",5:"Мая",6:"Июня",7:"Июля",8:"Августа",9:"Сентября",10:"Октября",11:"Ноября",12:"Декабря"},uk:{1:"Січня",2:"Лютого",3:"Березня",4:"Квітня",5:"Травня",6:"Червня",7:"Липня",8:"Серпня",9:"Вересня",10:"Жовтня",11:"Листопада",12:"Грудня"}};return a[t][e]},Helper.prototype.inObject=function(e,t,a,r){for(var n in e){if(Object.keys(e[n]).indexOf(t)>-1){a(e[n][t],r);break}Object.keys(e[n]).length>0&&"object"==typeof e[n]&&this.inObject(e[n],t,a,r)}},Helper.prototype.dayInUkranian=function(e){var t={Mon:"Понедiлок",Tue:"Вiвторок",Wed:"Середа",Thu:"Четвер",Fri:"П`ятниця",Sat:"Субота",Sun:"Недiля"};return t[e]},Helper.prototype.tempDescription=function(e){var t={0:"Торнадо",1:"Тропічний шторм",2:"Ураган",3:"Сильні грози",4:"Грози",5:"Змішаний дощ зi снігом",6:"Змішаний дощ зi снігом",7:"Змішаний дощ зi снігом",8:"Паморозь",9:"Мряка",10:"Град",11:"Зливи",12:"Зливи",13:"Сніговi пориви",14:"Легкий сніг",15:"Хуртовина",16:"Снiг",17:"Град",18:"Дощ зі снігом",19:"Туманно",20:"Туманно",21:"Туманно",22:"Туманно",23:"Вітрянно",24:"Вітрянно",25:"Прохолодно",26:"Хмарно",27:"Переважно хмарно",28:"Переважно хмарно",29:"Мінлива хмарність",30:"Мінлива хмарність",31:"Ясно",32:"Сонячно",33:"Ясно",34:"Ясно",35:"Змішаний дощ з градом",36:"Спекотно",37:"Грози",38:"Розсіяні грози",39:"Розсіяні грози",40:"Мінлива хмарність",41:"Сильний снігопад",42:"Снігопад",43:"Сильний снігопад",44:"Мінлива хмарність",45:"Зливи",46:"Зливовий сніг",47:"Зливи"};return t[e]},Helper.prototype.templateImage=function(e,t){"use strict";var a='<a href="/site/news/'+e.id+'" class="val-news-item-category val-category-image"><div class="val-item-outer-category-image"><img src="/uploads/news/thumb/'+e.image+'" alt="'+e["title_"+t]+'"></div><div class="val-line-vews-data"><span class="val-content-news-data">'+this.dateHalper(e.date,t)+'</span><span class="val-news-view">'+e.views+'</span></div><h2 class="val-title-news-category">'+e["title_"+t]+"</h2></a>";return a},Helper.prototype.templateWithoutImage=function(e,t){"use strict";var a='<a href="/site/news/'+e.id+'" class="val-news-item-category"><div class="val-line-vews-data"><span class="val-content-news-data">'+this.dateHalper(e.date,t)+'</span><span class="val-news-view">'+e.views+'</span></div><h2 class="val-title-news-category">'+e["title_"+t]+'</h2><p class="val-description-news-category">'+e["description_"+t].slice(0,250)+"...</p></a>";return a},Helper.prototype.scrollHandler=function(e){"use strict";document.body.offsetHeight-1500<window.scrollY+window.innerHeight&&this.state&&!e?(this.state=!1,this.generateDataAjax()):document.body.offsetHeight-700<window.scrollY+window.innerHeight&&this.state&&this.count<10&&e&&(7===this.count&&this.count++,this.state=!1,this.generateDataAjax(this.count))},Helper.prototype.inArray=function(e,t){"use strict";for(var a=0,r=t.length;r>a;a++)if(t[a]==e)return!0;return!1},ModelXhr.prototype=Object.create(Helper.prototype),ModelXhr.prototype.Xhr=function(e,t,a,r,n){"use strict";if(a){var s=a.querySelectorAll("input");i=new FormData;for(var o=0;o<s.length;o++)i.append(s[o].name,s[o].value)}else var i=null;var l=new XMLHttpRequest;l.onreadystatechange=function(e){200===l.status&&4===l.readyState&&n(l.responseText,r)},l.open(e,t,!0),l.send(i)},Site.prototype=Object.create(ModelXhr.prototype),AjaxConstructor.prototype=Object.create(Site.prototype),AjaxConstructor.prototype.commonProps=function(e,t){"use strict";window.addEventListener("scroll",e.scrollHandler.bind(e,t)),t||e.generateDataAjax()};var handlerAllStart=function(){"use strict";new Slider(document.querySelector(".val-list-slider")),new IframeGemerate(document.querySelector(".val-iframe-streams")),new AjaxLoadCategory(document.querySelector(".val-full-width-category")),new Modal,new Currency,new weatherForVal,new MenuButton(document.querySelector(".val-button-menu"),document.querySelector(".val-all-outer")),new Market(document.querySelector(".val-market-table")),new StickyAccordeon(document.getElementById("val-only-else-pages")),new AjaxLoaderCategorySingle(document.getElementById("val-single-category"),document.getElementById("val-count-and-id")),new AjaxLoaderMultimedia(document.getElementById("val-single-multimedia"),document.getElementById("val-count-and-id")),new Pikaday({field:document.getElementById("datepicker")}),new MansoryGenerator(document.querySelectorAll(".-for-mansory-container"))};-1==location.href.indexOf("jasmine")&&window.addEventListener("DOMContentLoaded",handlerAllStart),AjaxLoadCategory.prototype=Object.create(AjaxConstructor.prototype),AjaxLoadCategory.prototype.generateDataAjax=function(e){"use strict";var t=this;this.Xhr("GET","/site/GetCategory?id="+e,null,t,t.responseGetServer)},AjaxLoadCategory.prototype.responseGetServer=function(e,t){"use strict";var a=JSON.parse(e),r=JSON.parse(a.news),n=JSON.parse(a.category),s=a.language;t.templateCategory(r,n,s)},AjaxLoadCategory.prototype.templateCategory=function(e,t,a){"use strict";for(var r=this,n='<div class="val-category-block"><h2 class="val-title-uppercase-with-line">'+t[0]["name_"+a]+'</h2><div class="val-news-list-category">',s=0;s<e.length;s++)n+=0===s?r.templateImage(e[s],a):r.templateWithoutImage(e[s],a);n+="</div></div>",r.container.insertAdjacentHTML("beforeend",n),this.state=!0,this.count++},AjaxLoaderMultimedia.prototype=Object.create(AjaxConstructor.prototype),AjaxLoaderMultimedia.prototype.generateDataAjax=function(){"use strict";this.Xhr("GET","/site/GetMultimedia?offset="+this.count,null,this,this.template)},AjaxLoaderMultimedia.prototype.template=function(e,t){"use strict";function a(){t.count=JSON.parse(e).offset,t.state=!0}var r=JSON.parse(JSON.parse(e).multimedia),n=JSON.parse(e).language,s=[];r.forEach(function(e,t){var a=document.createElement("a"),r=document.createElement("div"),o=new Image,i=document.createElement("span"),l="-val-ico-"+e.type;a.href="photo"==e.type?"/"+n+"/site/photos/"+e.id:"/"+n+"/site/video/"+e.id,a.classList.add("val-block-multimedia",l),r.classList.add("val-image-block-multimedia"),"photo"==e.type?o.src="http://val.ua/uploads/galery/category/"+e.image:o.src="http://img.youtube.com/vi/"+e.image+"/mqdefault.jpg",i.classList.add("-val-multimedia-description"),i.innerHTML=e["name_"+n],r.appendChild(o),a.appendChild(i),a.appendChild(r),s.push(a)});for(var o=s.length-1;o>=0;o--)t.element.appendChild(s[o]);t._Masonry_?(t._Masonry_.appended(s),t._Masonry_.layout(),a()):setTimeout(function(){t._Masonry_=new Masonry(t.element,{itemSelector:".val-block-multimedia",columnWidth:1}),a(),t.element.style.opacity=1},500)},AjaxLoaderCategorySingle.prototype=Object.create(AjaxConstructor.prototype),AjaxLoaderCategorySingle.prototype.generateDataAjax=function(){"use strict";this.Xhr("GET","/site/GetCategoryByIdXhrOrNotId?id="+this.id+"&offset="+this.count,null,this,this.template)},AjaxLoaderCategorySingle.prototype.template=function(e,t){"use strict";var a=JSON.parse(JSON.parse(e).news),r=JSON.parse(e).language,n="";a.forEach(function(e){n+='<a href="/site/news/'+e.id+'" class="val-block-gen-news"><div class="val-image-block-gen-news"><img src="/uploads/news/thumb/'+e.image+'"></div><div class="val-description-block-gen-news"><span class="val-news-view">'+e.views+'</span><span class="val-content-news-data">'+t.dateHalper(e.date,r)+'</span><h3 class="val-content-news-title-small">'+e["title_"+r]+"</h3></div></a>"}),t.element.insertAdjacentHTML("beforeend",n),t.count=JSON.parse(e).offset,t.state=!0},Currency.prototype=Object.create(Site.prototype),Currency.prototype.templates=function(e,t){"use strict";var a,r=JSON.parse(e),n=["ПриватБанк","ПУМБ","Укрсоцбанк"],s=[];[].reduce.call(r,function(e,t,r){return-1==n.indexOf(t.bankName)?0:(0!=e&&t.bankName==e||(a={},a.bankName=t.bankName),a[t.codeAlpha]={rateBuy:t.rateBuy,rateBuyDelta:t.rateBuyDelta,rateSale:t.rateSale,rateSaleDelta:t.rateSaleDelta},a&&Object.keys(a).length>3&&s.push(a),t.bankName)},0),t.templateForArray(s,t)},Currency.prototype.templateForArray=function(e,t){"use strict";var a="<table class='-new-currensy'><tr><th><span>Банк</span></th><th><span style='font-size: 18px'>&#402;</span></th><th><span>Покупка</span></th><th><span>Продажа</span></th></tr>";[].forEach.call(e,function(e,r){a+="<tr><td><p><i>"+e.bankName+"</i></p></td><td><span><b>&euro;</b></span><span><b>$</b></span><span><b>R</b></span></td><td><span>"+t.gets(e,"EUR","rateBuy")+"</span> <span>"+t.gets(e,"USD","rateBuy")+"</span> <span>"+t.gets(e,"RUB","rateBuy")+"</span></td><td><span>"+t.gets(e,"EUR","rateSale")+"</span> <span>"+t.gets(e,"USD","rateSale")+"</span> <span>"+t.gets(e,"RUB","rateSale")+"</span></td></tr>"}),a+="</table>";var r=document.querySelector(".-currency-val");r.insertAdjacentHTML("beforeend",a)},Currency.prototype.gets=function(e,t,a){"use strict";var r,n;return e[t]?"rateBuy"==a?(n="<mark>"+Number(e[t][a]).toFixed(2)+"</mark>",r=e[t].rateBuyDelta>0?"<i class='-to-hight'> &nbsp; &#9650;</i>":e[t].rateBuyDelta<0?"<i class='-to-low'> &nbsp; &#9660;</i>":"",n+=r):"rateSale"==a?(n="<mark>"+Number(e[t][a]).toFixed(2)+"</mark>",r=e[t].rateSaleDelta>0?"<i class='-to-hight'> &nbsp; &#9650;</i>":e[t].rateSaleDelta<0?"<i class='-to-low'> &nbsp; &#9660;</i>":"",n+=r):void 0:"-"},IframeGemerate.prototype.template=function(e){"use strict";var t="<div class='val-outer-frame'><span class='val-ico-online'><i>Online</i></span><iframe width='100%' height='270px' src='"+e+"' frameborder='0' allowfullscreen></iframe></div>";return t},MansoryGenerator.prototype.generateMansory=function(e){function t(t){delete t,r>n?n++:(new Masonry(e,{itemSelector:s,columnWidth:1}),e.style.opacity="1",e.querySelector(".val-block-multimedia-gallery")&&$(function(){$(s).imageLightbox()}))}var a=e.querySelectorAll("img"),r=a.length,n=1,s=e.querySelector(".val-block-multimedia-gallery")?".val-block-multimedia-gallery":".val-block-multimedia";[].forEach.call(a,function(e,a){var r=new Image;r.src=e.src,r.onload=function(){t(this)}})},Market.prototype.HandlerToMouseEnterLeave=function(){var e=this.getAttribute("data-attr"),t=document.getElementById(e);t&&("mouseenter"==event.type?t.style.display="block":t.style.display="none")},MenuButton.prototype.slideMenu=function(e,t){"use strict";t.classList.toggle("-val-active-menu-side"),e.classList.toggle("val-all-outer-animate")},Modal.prototype=Object.create(Site.prototype),Modal.prototype.openForm=function(e,t){"use strict";this.contentBox=document.querySelector("."+e.getAttribute("data-attr")),this.contentBox.style.display="block",this.outerModal.classList.add("-active-outer"),this.contentBox.classList.add("-animate-content-window"),this.closeActivated()},Modal.prototype.closeActivated=function(e){"use strict";var t=this.contentBox.querySelector(".val-close-modals"),a=this;t.addEventListener("click",a.closeModal.bind(a))},Modal.prototype.closeModal=function(){"use strict";var e=this;this.contentBox.classList.add("-animate-content-window-close"),e.outerModal.classList.add("-active-outer-out"),setTimeout(function(){e.outerModal.classList.remove("-active-outer","-active-outer-out"),e.contentBox.style.display="none",e.removeClass(e.contentBox,["-animate-content-window","-animate-content-window-close"])},500)},Modal.prototype.removeClass=function(e,t){"use strict";t.forEach(function(t){e.classList.remove(t)})},Modal.prototype.openRememberPassOrBack=function(){"use strict";for(var e=event&&event.target,t=e.parentNode.parentNode,a=t.querySelectorAll("form"),r=0;r<a.length;r++)if("none"===window.getComputedStyle(a[r]).getPropertyValue("display")){var n=a[r].querySelector(".val-notice");n&&n.parentNode.removeChild(n),a[r].style.display="block"}else a[r].style.display="none"},Modal.prototype.sendForm=function(e,t){"use strict";t.preventDefault();var a="/site/"+e;this.StaticForm=t.target,this.Xhr("POST",a,this.StaticForm,this,this.responseFromServer)},Modal.prototype.responseFromServer=function(e,t){"use strict";JSON.parse(e).href?window.location.href=location.protocol+"//"+location.host+JSON.parse(e).href:t.StaticForm.insertAdjacentHTML("beforeend",'<p class="val-notice">'+JSON.parse(e)+"</p>"),t.StaticForm&&t.StaticForm.reset()},Slider.prototype.createControls=function(e){"use strict";for(var t=document.querySelector(".val-display-controls"),a="",r=this,n=0;e>n;n++)a+=0===n?"<span class='-active-slide' data-slide="+n+"></span>":"<span data-slide="+n+"></span>";t.insertAdjacentHTML("afterbegin",a),t.addEventListener("click",r._clickSlideHandlers.bind(r)),this.controlsBuild=!0},Slider.prototype._clickSlideHandlers=function(e){"use strict";function t(e,t){var a=document.querySelector(".-active-slide");r.list.style.cssText+="transition-duration: "+t+"s; ",r.list.style.cssText+="transform: translateX("+e+"px)",r.currentSlide=n,r.move=e,a.parentNode.querySelector("span[data-slide='"+n+"']").classList.add("-active-slide"),a.classList.remove("-active-slide")}var a=e.target?e.target:e,r=this,n=a.getAttribute("data-slide")?parseInt(a.getAttribute("data-slide")):null;null==n||a.classList.contains("-active-slide")||t(parseInt(-r.width*n),.8)},StickyAccordeon.prototype.positionOfAccordeon=function(){"use strict";var e=this.accordeon.parentNode.getBoundingClientRect(),t=document.querySelector(".val-footer").getBoundingClientRect();e.top<=30&&t.top>450?this.accordeon.style.paddingTop=-e.top+"px":e.top>30&&this.accordeon.getAttribute("style")&&this.accordeon.removeAttribute("style")},weatherForVal.prototype=Object.create(Site.prototype),weatherForVal.prototype.generateTemp=function(e,t){var a=e.forecast,r=e.condition.temp,n=t.creaters(a),s='<div class="drop-weather-button"><div class="outer-today-ico"><span class="icons-for-c-min icon-weather-min-'+a[0].code+'"></span><i class="today-weather"> '+r+' С°</i></div><div class="drop-wether"><p class="for-genwether"><span class="title-weather">Погода</span><span class="city-weather">Украина, Чернигов</span></p><div class="section-today"><div class="for-weather-icon"><h5 class="section-heading">Сьогодні</h5><span class="icons-for-c icon-weather-'+a[0].code+'"></span></div><div class="weather-detail"><h4 class="weather-heading"><span class="temp-now"> '+r+' С° </span><span class="phrase"> Температура зараз</span></h4><span class="temperature high-temperature">'+a[0].high+' С°</span>&nbsp; - &nbsp;<span class="temperature low-temperature">'+a[0].low+' С°</span><p class="summary">'+t.tempDescription(a[0].code)+'</p></div></div><div class="section-this-week"><h5 class="section-heading">Тиждень</h5><ul class="item-list-temperature">'+n+"</ul></div></div></div>",o=document.querySelector(".outer-for-weather");o.insertAdjacentHTML("beforeend",s)},weatherForVal.prototype.queryForecast=function(e,t){"use strict";var a=JSON.parse(e);t.inObject(a,"item",t.generateTemp,t)},weatherForVal.prototype.creaters=function(e){"use strict";var t="",a=this;return[].forEach.call(e,function(e,r){0!=r&&5>r&&(t+='<li class="item-time-temperature"><span class="icons-for-c icon-weather-'+e.code+'"></span><span class="day">'+a.dayInUkranian(e.day)+'</span><span class="temperature-days high-temperature">'+e.high+' С°</span>&nbsp;-&nbsp;<span class="temperature-days low-temperature">'+e.low+" С°</span></li>")}),t};