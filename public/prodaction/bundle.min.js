function Helper(){"use strict"}function ModelXhr(){"use strict";this.xhr=function(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t}}function Site(){"use strict"}function AjaxConstructor(){"use strict"}function Slider(t){"use strict";function e(t,e){t.setAttribute("data-slides-number",e)}t&&(this.list=t,this.countChild=t.children.length,this.width=parseInt(window.getComputedStyle(t.parentNode).getPropertyValue("width")),this.move=0,this.currentSlide=0,t.style.width=this.width*this.countChild+"px",[].forEach.call(t.children,e),this.createControls(this.countChild))}function IframeGemerate(t){"use strict";if(!t)return!1;var e=t.getAttribute("data-src").split(","),a=this,r="";e.forEach(function(t){r+=a.template(t)}),t.insertAdjacentHTML("afterbegin",r)}function StickyAccordeon(t){"use strict";if(t){this.accordeon=t.querySelector(".val-accordeons-block");var e=this;window.addEventListener("scroll",e.positionOfAccordeon.bind(e))}}function Modal(){"use strict";var t=this;this.login=document.querySelector(".-login"),this.registration=document.querySelector(".-registration"),this.about=document.querySelector(".-about"),this.outerModal=document.querySelector(".val-modal-login-reg-outer"),this.rememberPassOrBack=document.querySelectorAll(".-val-remember-pass"),this.formSubmit=this.outerModal?this.outerModal.querySelectorAll("form"):null,this.StaticForm=null,this.login.addEventListener("click",t.openForm.bind(t,this.login)),this.registration.addEventListener("click",t.openForm.bind(t,this.registration)),this.about.addEventListener("click",t.openForm.bind(t,this.about));for(var e=0;e<this.rememberPassOrBack.length;e++)this.rememberPassOrBack[e].addEventListener("click",t.openRememberPassOrBack.bind(t));for(var a=0;a<this.formSubmit.length;a++)this.formSubmit[a].addEventListener("submit",t.sendForm.bind(t,this.formSubmit[a].id))}function Market(t){if(t){this.element=t;for(var e=this.element.children,a=0;a<e.length;a++)"mouseenter mouseleave".split(" ").forEach(function(t){e[a].addEventListener(t,this.HandlerToMouseEnterLeave,!1)}.bind(this))}}function Currency(){"use strict";var t="http://"+location.hostname+"/site/tryCurrency";this.Xhr("GET",t,null,this,this.templates)}function weatherForVal(){"use strict";var t="https://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20woeid%3D918233%20and%20u%3D%22c%22&format=json&l=ru";this.Xhr("GET",t,null,this,this.tmp)}function MansoryGenerator(t){t&&[].forEach.call(t,this.generateMansory)}function AjaxLoadCategory(t){"use strict";t&&(this.count=1,this.container=t,this.state=!0,this.commonProps(this,"general"))}function AjaxLoaderCategorySingle(t,e){"use strict";t&&(this.element=t,this.id=e.getAttribute("data-id")?e.getAttribute("data-id"):null,this.count=e.getAttribute("data-count"),this.state=!0,this.commonProps(this,null))}function AjaxLoaderMultimedia(t,e){"use strict";t&&(this.element=t,this.count=e.getAttribute("data-count"),this.state=!0,this._Masonry_=null,this.commonProps(this,null))}Helper.prototype.returnDateNow=function(){"use strict";var t=new Date,e=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getFullYear();return r+"-"+a+"-"+e},Helper.prototype.dateHalper=function(t,e){"use strict";var a=t.split(" ");if(this.returnDateNow()>a[0]){var r=this.mounthObject(new Date(a[0]).getMonth()+1,e),o=new Date(a[0]).getDate(),n=new Date(a[0]).getFullYear();return o+" "+r+" "+n}return a[1].slice(0,-3)},Helper.prototype.mounthObject=function(t,e){"use strict";var a={ru:{1:"Января",2:"Февраля",3:"Марта",4:"Апреля",5:"Мая",6:"Июня",7:"Июля",8:"Августа",9:"Сентября",10:"Октября",11:"Ноября",12:"Декабря"},uk:{1:"Січня",2:"Лютого",3:"Березня",4:"Квітня",5:"Травня",6:"Червня",7:"Липня",8:"Серпня",9:"Вересня",10:"Жовтня",11:"Листопада",12:"Грудня"}};return a[e][t]},Helper.prototype.inObject=function(t){return function e(a){for(var r in t){if("forecast"==r)return t[r];Object.keys(t[r]).length>0&&e(a)}}()},Helper.prototype.templateImage=function(t,e){"use strict";var a='<a href="/site/news/'+t.id+'" class="val-news-item-category val-category-image"><div class="val-item-outer-category-image"><img src="/uploads/news/thumb/'+t.image+'" alt="'+t["title_"+e]+'"></div><div class="val-line-vews-data"><span class="val-content-news-data">'+this.dateHalper(t.date,e)+'</span><span class="val-news-view">'+t.views+'</span></div><h2 class="val-title-news-category">'+t["title_"+e]+"</h2></a>";return a},Helper.prototype.templateWithoutImage=function(t,e){"use strict";var a='<a href="/site/news/'+t.id+'" class="val-news-item-category"><div class="val-line-vews-data"><span class="val-content-news-data">'+this.dateHalper(t.date,e)+'</span><span class="val-news-view">'+t.views+'</span></div><h2 class="val-title-news-category">'+t["title_"+e]+'</h2><p class="val-description-news-category">'+t["description_"+e].slice(0,250)+"...</p></a>";return a},Helper.prototype.scrollHandler=function(t){"use strict";document.body.offsetHeight-1500<window.scrollY+window.innerHeight&&this.state&&!t?(this.state=!1,this.generateDataAjax()):document.body.offsetHeight-700<window.scrollY+window.innerHeight&&this.state&&this.count<10&&t&&(7===this.count&&this.count++,this.state=!1,this.generateDataAjax(this.count))},Helper.prototype.inArray=function(t,e){"use strict";for(var a=0,r=e.length;r>a;a++)if(e[a]==t)return!0;return!1},ModelXhr.prototype=Object.create(Helper.prototype),ModelXhr.prototype.Xhr=function(t,e,a,r,o){"use strict";if(a){var n=a.querySelectorAll("input");i=new FormData;for(var s=0;s<n.length;s++)i.append(n[s].name,n[s].value)}else var i=null;var l=new XMLHttpRequest;l.onreadystatechange=function(t){200===l.status&&4===l.readyState&&o(l.responseText,r)},l.open(t,e,!0),l.send(i)},Site.prototype=Object.create(ModelXhr.prototype),AjaxConstructor.prototype=Object.create(Site.prototype),AjaxConstructor.prototype.commonProps=function(t,e){"use strict";window.addEventListener("scroll",t.scrollHandler.bind(t,e)),e||t.generateDataAjax()};var handlerAllStart=function(){"use strict";new Slider(document.querySelector(".val-list-slider")),new IframeGemerate(document.querySelector(".val-iframe-streams")),new AjaxLoadCategory(document.querySelector(".val-full-width-category")),new Modal,new Currency,new weatherForVal,new Market(document.querySelector(".val-market-table")),new StickyAccordeon(document.getElementById("val-only-else-pages")),new AjaxLoaderCategorySingle(document.getElementById("val-single-category"),document.getElementById("val-count-and-id")),new AjaxLoaderMultimedia(document.getElementById("val-single-multimedia"),document.getElementById("val-count-and-id")),new Pikaday({field:document.getElementById("datepicker")}),new MansoryGenerator(document.querySelectorAll(".-for-mansory-container"))};-1==location.href.indexOf("jasmine")&&window.addEventListener("DOMContentLoaded",handlerAllStart),Slider.prototype.createControls=function(t){"use strict";for(var e=document.querySelector(".val-display-controls"),a="",r=this,o=0;t>o;o++)a+=0===o?"<span class='-active-slide' data-slide="+o+"></span>":"<span data-slide="+o+"></span>";e.insertAdjacentHTML("afterbegin",a),e.addEventListener("click",r._clickSlideHandlers.bind(r)),this.controlsBuild=!0},Slider.prototype._clickSlideHandlers=function(t){"use strict";function e(t,e){var a=document.querySelector(".-active-slide");r.list.style.cssText+="transition-duration: "+e+"s; ",r.list.style.cssText+="transform: translateX("+t+"px)",r.currentSlide=o,r.move=t,a.parentNode.querySelector("span[data-slide='"+o+"']").classList.add("-active-slide"),a.classList.remove("-active-slide")}var a=t.target?t.target:t,r=this,o=a.getAttribute("data-slide")?parseInt(a.getAttribute("data-slide")):null,n=null;null==o||a.classList.contains("-active-slide")||(o>this.currentSlide?this.currentSlide+1<o?(n=parseInt(-r.width*o),e(n,.5)):(n=parseInt(r.move)+parseInt(-r.width),e(n,.8)):this.currentSlide-1>o?(n=parseInt(-r.width*o),e(n,.5)):(n=parseInt(r.move)+parseInt(r.width),e(n,.8)))},IframeGemerate.prototype.template=function(t){"use strict";var e="<div class='val-outer-frame'><span class='val-ico-online'><i>Online</i></span><iframe width='100%' height='270px' src='"+t+"' frameborder='0' allowfullscreen></iframe></div>";return e},StickyAccordeon.prototype.positionOfAccordeon=function(){"use strict";var t=this.accordeon.parentNode.getBoundingClientRect();t.top<=30&&"fixed"!==this.accordeon.style.position?this.accordeon.style.position="fixed":t.top>30&&this.accordeon.getAttribute("style")&&this.accordeon.removeAttribute("style")},Modal.prototype=Object.create(Site.prototype),Modal.prototype.openForm=function(t,e){"use strict";this.contentBox=document.querySelector("."+t.getAttribute("data-attr")),this.contentBox.style.display="block",this.outerModal.classList.add("-active-outer"),this.contentBox.classList.add("-animate-content-window"),this.closeActivated()},Modal.prototype.closeActivated=function(t){"use strict";var e=this.contentBox.querySelector(".val-close-modals"),a=this;e.addEventListener("click",a.closeModal.bind(a))},Modal.prototype.closeModal=function(){"use strict";var t=this;this.contentBox.classList.add("-animate-content-window-close"),t.outerModal.classList.add("-active-outer-out"),setTimeout(function(){t.outerModal.classList.remove("-active-outer","-active-outer-out"),t.contentBox.style.display="none",t.removeClass(t.contentBox,["-animate-content-window","-animate-content-window-close"])},500)},Modal.prototype.removeClass=function(t,e){"use strict";e.forEach(function(e){t.classList.remove(e)})},Modal.prototype.openRememberPassOrBack=function(){"use strict";for(var t=0;t<this.formSubmit.length;t++)if("none"===window.getComputedStyle(this.formSubmit[t]).getPropertyValue("display")){var e=this.formSubmit[t].querySelector(".val-notice");e&&e.parentNode.removeChild(e),this.formSubmit[t].style.display="block"}else this.formSubmit[t].style.display="none"},Modal.prototype.sendForm=function(t,e){"use strict";e.preventDefault();var a="/site/"+t;this.StaticForm=e.target,this.Xhr("POST",a,this.StaticForm,this,this.responseFromServer)},Modal.prototype.responseFromServer=function(t,e){"use strict";JSON.parse(t).href?window.location.href=location.protocol+"//"+location.host+JSON.parse(t).href:e.StaticForm.insertAdjacentHTML("beforeend",'<p class="val-notice">'+JSON.parse(t)+"</p>"),e.StaticForm&&e.StaticForm.reset()},Market.prototype.HandlerToMouseEnterLeave=function(){var t=this.getAttribute("data-attr"),e=document.getElementById(t);e&&("mouseenter"==event.type?e.style.display="block":e.style.display="none")},Currency.prototype=Object.create(Site.prototype),Currency.prototype.templates=function(t,e){"use strict";var a,r=JSON.parse(t),o=["Альфа-Банк","ПриватБанк","ПУМБ","Укрсоцбанк","Райффайзен Банк Аваль"],n=[];[].reduce.call(r,function(t,e,r){return 0==t||e.bankName!=t?(a&&n.push(a),a={},a.bankName=e.bankName,a[e.codeAlpha]={rateBuy:e.rateBuy,rateBuyDelta:e.rateBuyDelta,rateSale:e.rateSale,rateSaleDelta:e.rateSaleDelta}):a[e.codeAlpha]={rateBuy:e.rateBuy,rateBuyDelta:e.rateBuyDelta,rateSale:e.rateSale,rateSaleDelta:e.rateSaleDelta},e.bankName},0);var s=n.filter(function(t,a){return e.inArray(t.bankName,o)?t:void 0});e.templateForArray(s,e)},Currency.prototype.templateForArray=function(t,e){"use strict";var a="<table class='-new-currensy'><tr><th><span>Банк</span></th><th><span style='font-size: 18px'>&#402;</span></th><th><span>Покупка</span></th><th><span>Продажа</span></th></tr>";[].forEach.call(t,function(t,r){a+="<tr><td><p><i>"+t.bankName+"</i></p></td><td><span><b>&euro;</b></span><span><b>$</b></span><span><b>R</b></span></td><td><span>"+e.gets(t,"EUR","rateBuy")+"</span> <span>"+e.gets(t,"USD","rateBuy")+"</span> <span>"+e.gets(t,"RUB","rateBuy")+"</span></td><td><span>"+e.gets(t,"EUR","rateSale")+"</span> <span>"+e.gets(t,"USD","rateSale")+"</span> <span>"+e.gets(t,"RUB","rateSale")+"</span></td></tr>"}),a+="</table>";var r=document.querySelector(".-currency-val");r.insertAdjacentHTML("beforeend",a)},Currency.prototype.gets=function(t,e,a){"use strict";var r,o;return t[e]?"rateBuy"==a?(o="<mark>"+Number(t[e][a]).toFixed(2)+"</mark>",r=t[e].rateBuyDelta>0?"<i class='-to-hight'> &nbsp; &#9650;</i>":t[e].rateBuyDelta<0?"<i class='-to-low'> &nbsp; &#9660;</i>":"",o+=r):"rateSale"==a?(o="<mark>"+Number(t[e][a]).toFixed(2)+"</mark>",r=t[e].rateSaleDelta>0?"<i class='-to-hight'> &nbsp; &#9650;</i>":t[e].rateSaleDelta<0?"<i class='-to-low'> &nbsp; &#9660;</i>":"",o+=r):void 0:"-"},weatherForVal.prototype=Object.create(Site.prototype),weatherForVal.prototype.tmp=function(t,e){"use strict";var a=JSON.parse(t);console.log(e.inObject(a)())},weatherForVal.prototype.creaters=function(t){},MansoryGenerator.prototype.generateMansory=function(t){function e(e){delete e,r>o?o++:(new Masonry(t,{itemSelector:n,columnWidth:1}),t.style.opacity="1",$(function(){$(n).imageLightbox()}))}var a=t.querySelectorAll("img"),r=a.length,o=1,n=t.querySelector(".val-block-multimedia-gallery")?".val-block-multimedia-gallery":".val-block-multimedia";[].forEach.call(a,function(t,a){var r=new Image;r.src=t.src,r.onload=function(){e(this)}})},AjaxLoadCategory.prototype=Object.create(AjaxConstructor.prototype),AjaxLoadCategory.prototype.generateDataAjax=function(t){"use strict";var e=this;this.Xhr("GET","/site/GetCategory?id="+t,null,e,e.responseGetServer)},AjaxLoadCategory.prototype.responseGetServer=function(t,e){"use strict";var a=JSON.parse(t),r=JSON.parse(a.news),o=JSON.parse(a.category),n=a.language;e.templateCategory(r,o,n)},AjaxLoadCategory.prototype.templateCategory=function(t,e,a){"use strict";for(var r=this,o='<div class="val-category-block"><h2 class="val-title-uppercase-with-line">'+e[0]["name_"+a]+'</h2><div class="val-news-list-category">',n=0;n<t.length;n++)o+=0===n?r.templateImage(t[n],a):r.templateWithoutImage(t[n],a);o+="</div></div>",r.container.insertAdjacentHTML("beforeend",o),this.state=!0,this.count++},AjaxLoaderCategorySingle.prototype=Object.create(AjaxConstructor.prototype),AjaxLoaderCategorySingle.prototype.generateDataAjax=function(){"use strict";this.Xhr("GET","/site/GetCategoryByIdXhrOrNotId?id="+this.id+"&offset="+this.count,null,this,this.template)},AjaxLoaderCategorySingle.prototype.template=function(t,e){"use strict";var a=JSON.parse(JSON.parse(t).news),r=JSON.parse(t).language,o="";a.forEach(function(t){o+='<a href="/site/news/'+t.id+'" class="val-block-gen-news"><div class="val-image-block-gen-news"><img src="/uploads/news/thumb/'+t.image+'"></div><div class="val-description-block-gen-news"><span class="val-news-view">'+t.views+'</span><span class="val-content-news-data">'+e.dateHalper(t.date,r)+'</span><h3 class="val-content-news-title-small">'+t["title_"+r]+"</h3></div></a>"}),e.element.insertAdjacentHTML("beforeend",o),e.count=JSON.parse(t).offset,e.state=!0},AjaxLoaderMultimedia.prototype=Object.create(AjaxConstructor.prototype),AjaxLoaderMultimedia.prototype.generateDataAjax=function(){"use strict";this.Xhr("GET","/site/GetMultimedia?offset="+this.count,null,this,this.template)},AjaxLoaderMultimedia.prototype.template=function(t,e){"use strict";function a(){e.count=JSON.parse(t).offset,e.state=!0}var r=JSON.parse(JSON.parse(t).multimedia),o=JSON.parse(t).language,n=[];r.forEach(function(t,e){var a=document.createElement("a"),r=document.createElement("div"),s=new Image,i=document.createElement("span"),l="-val-ico-"+t.type;a.href="photo"==t.type?"/"+o+"/site/photos/"+t.id:"/"+o+"/site/video/"+t.id,a.classList.add("val-block-multimedia",l),r.classList.add("val-image-block-multimedia"),"photo"==t.type?s.src="/uploads/galery/category/"+t.image:s.src="http://img.youtube.com/vi/"+t.image+"/mqdefault.jpg",i.classList.add("-val-multimedia-description"),i.innerHTML=t["name_"+o],r.appendChild(s),a.appendChild(i),a.appendChild(r),n.push(a)});for(var s=n.length-1;s>=0;s--)e.element.appendChild(n[s]);e._Masonry_?(e._Masonry_.appended(n),e._Masonry_.layout(),a()):setTimeout(function(){e._Masonry_=new Masonry(e.element,{itemSelector:".val-block-multimedia",columnWidth:1}),a(),e.element.style.opacity=1},500)};